---
page_title: "vagrant_vm Resource - terraform-provider-vagrant"
description: |-
  Integrate vagrant into terraform.
---

# vagrant_vm (Resource)

## Forcing an Update
The easiest way to force an update is to set, or change the value of, some
environment variable. This will signal to terraform that the vagrant_vm
resource needs to update.

In the example below, a environment variable, `VAGRANTFILE_HASH`, is set to
the md5 hash of the Vagrantfile. When the file changes, the hash will change,
and terraform will ask for an update.

## Example Usage

```terraform
resource "vagrant_vm" "my_vagrant_vm" {
  env = {
    # force terraform to re-run vagrant if the Vagrantfile changes
    VAGRANTFILE_HASH = md5(file("./Vagrantfile")),
  }
  get_ports = true
  # see schema for additional options
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- **env** (Map of String) Environment variables to pass to the Vagrantfile.
- **get_ports** (Boolean) Whether or not to retrieve forwarded port information. See `ports`. Defaults to `false`.
- **id** (String) The ID of this resource.
- **vagrantfile_dir** (String) Path to the directory where the Vagrantfile can be found. Defaults to `.`.

### Read-Only

- **machine_names** (List of String) Names of the vagrant machines from the Vagrantfile. Names are in the same order as ssh_config.
- **ports** (List of List of Object) Forwarded ports per machine. Only set if `get_ports` is true.
- **ssh_config** (List of Object) SSH connection information. (see [below for nested schema](#nestedatt--ssh_config))

<a id="nestedatt--ssh_config"></a>
### Nested Schema for `ssh_config`

Read-Only:

- **agent** (String)
- **host** (String)
- **port** (String)
- **private_key** (String)
- **type** (String)
- **user** (String)
